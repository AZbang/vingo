{"version":3,"sources":["assets/icon.png","assets/classical-building-ios.png","assets/classical-building-android.png","sw.js","reducers/fetch.js","storage.js","reducers/data.js","reducers/ui.js","env.js","sagas/data.js","sagas/index.js","store.js","reducers/index.js","actions/index.js","components/VingoHeader.js","components/StoryPreview.js","containers/StoriesBlock.js","components/MuseumIcon.js","components/MuseumsMap.js","containers/MuseumsMapBlock.js","containers/MainView.js","components/AchievementItem.js","containers/AchievementsView.js","containers/StoriesView.js","containers/SettingsView.js","components/Camera.js","components/ChipPanel.js","containers/PlaygroundView.js","getters/index.js","containers/App.js","index.js"],"names":["module","exports","__webpack_require__","p","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","initialState","Immutable","loading","reducer","arguments","length","undefined","action","type","merge","saveState","name","localStorage","setItem","JSON","stringify","getState","parse","getItem","museums","achievements","stories","museum","id","items","playgrounds","logreg","completeItems","completeAchievements","payload","Object","objectSpread","concat","data","tabbarShow","DB_PATH","MUSEUMS_PATH","ACHIEVEMENTS_PATH","STORIES_PATH","LOGREG_PATH","PLAYGROUNDS_PATH","ITEMS_PATH","fetchMuseums","fetchStories","fetchAchievements","fetchMuseum","getData","url","fetch","res","json","regenerator_default","a","wrap","_context","prev","next","put","call","sent","t0","stop","_marked","this","_context2","_marked2","_context3","_marked3","_context4","all","replace","_marked4","rootSaga","takeEvery","sagas_marked","history","createBrowserHistory","sagaMiddleware","createSagaMiddleware","composeEnhancer","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","combineReducers","router","connectRouter","ui","applyMiddleware","routerMiddleware","run","toogleTabbar","toggle","VingoHeader","react_default","createElement","className","alt","src","logo","React","Component","StoryPreview","style","backgroundImage","props","image","StoriesBlock","getStoriesList","amt","flexShrink","display","width","height","flexDirection","_this","map","item","i","key","paddingRight","src_components_StoryPreview","vkui","paddingBottom","margin","connect","MuseumIcon","filter","disable","Math","random","icon1","icon2","MuseumsMap","_React$Component","_getPrototypeOf2","classCallCheck","_len","args","Array","_key","possibleConstructorReturn","getPrototypeOf","apply","getMarkers","yandex_map_react_lib","lat","lon","lng","onClick","locked","onMuseumClick","src_components_MuseumIcon","inherits","createClass","value","loadOptions","lang","apikey","innerWidth","innerHeight","center","zoom","MuseumsMapBlock","openPlayground","dispatch","push","museumId","position","paddingTop","top","zIndex","components_MuseumsMap","MainView","render","activePanel","src_components_VingoHeader","containers_StoriesBlock","containers_MuseumsMapBlock","AchievementItem","icon","AchievementsView","getAchievementsList","react_flexbox_grid_lib","xs","src_components_AchievementItem","fluid","background","StoriesView","marginBottom","SettingsView","marginTop","defaultChecked","marginLeft","float","marginRight","Camera","snapShotCanvas","document","videoStream","cameraStream","tickerId","autoPlay","ref","node","_this2","tf","webcamImage","cropImage","expandDims","toFloat","div","sub","onStream","img","size","min","shape","beginHeight","beginWidth","slice","_this3","mediaDevices","getUserMedia","video","facingMode","stream","getTracks","srcObject","onloadedmetadata","videoWidth","videoHeight","setInterval","capture","clearInterval","ChipPanel","bottom","children","PlaygroundView","components_Camera","src_components_ChipPanel","fontSize","fontWeight","textAlign","padding","getMuseum","predictItem","App","onStoryChange","e","currentTarget","dataset","story","nextProps","querySelector","opacity","activeRoute","pageId","activeStory","tabbar","selected","data-story","newsfeed_default","label","favorite_outline_default","story_default","settings_default","containers_MainView","containers_AchievementsView","containers_StoriesView","containers_SettingsView","containers_PlaygroundView","subscribe","ReactDOM","es","lib","Route","path","component","containers_App","params","getElementById","URL","process","origin","addEventListener","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker","cordova"],"mappings":"6EAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,sDCAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,wECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,6aCUlCC,EAAcC,QACa,cAA7BC,OAAOC,SAASC,UAEa,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACrB,2DAsCR,SAASC,EAAgBC,GACrBC,UAAUC,cACLC,SAASH,GACTI,KAAK,SAAAC,GACFA,EAAaC,cAAgB,WACzB,IAAMC,EAAmBF,EAAaG,WACtCD,EAAiBE,cAAgB,WACE,cAA3BF,EAAiBG,QACbT,UAAUC,cAAcS,WAKxBC,QAAQC,IAAI,6CAKZD,QAAQC,IAAI,2CAM/BC,MAAM,SAAAC,GACHH,QAAQG,MAAM,4CAA6CA,mDC7EjEC,EAAeC,IAAU,CAC7BC,SAAS,EACTH,MAAO,OAoBMI,EAhBC,WAAgC,IAA/BT,EAA+BU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzBJ,EAAcO,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC9C,OAAQC,EAAOC,MACb,IAAK,cACH,OAAOd,EAAMe,MAAM,CAACP,SAAS,IAE/B,IAAK,gBACH,OAAOR,EAAMe,MAAM,CAACP,SAAS,IAE/B,IAAK,cACH,OAAOR,EAAMe,MAAM,CAACP,SAAS,EAAOH,MAAOQ,EAAOR,QAEpD,QACE,OAAOL,YCpBN,SAASgB,EAAUC,EAAMjB,GAC9BkB,aAAaC,QAAQF,EAAMG,KAAKC,UAAUrB,IAGrC,SAASsB,EAASL,GACvB,OAAOG,KAAKG,MAAML,aAAaM,QAAQP,IAAS,QCFlD,IAAMX,EAAeC,IAAU,CAC7BkB,QAAS,GACTC,aAAc,GACdC,QAAS,GACTC,OAAQ,CACNC,GAAI,KACJC,MAAO,GACPC,YAAa,GACbC,OAAQ,IAGVC,cAAeX,EAAS,kBAAoB,GAC5CY,qBAAsBZ,EAAS,yBAA2B,KA4B7Cb,EAxBC,WAAgC,IAA/BT,EAA+BU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzBJ,EAAcO,EAAWH,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAC9C,OAAQC,EAAOC,MACb,IAAK,cACH,OAAOd,EAAMe,MAAM,CAACU,QAASZ,EAAOsB,UAEtC,IAAK,aACH,OAAOnC,EAAMe,MAAM,CAACa,OAAOQ,OAAAC,EAAA,EAAAD,CAAA,GAAKvB,EAAOsB,QAAb,CAAsBN,GAAIhB,EAAOgB,OAE7D,IAAK,cACH,OAAO7B,EAAMe,MAAM,CAACY,QAASd,EAAOsB,UAEtC,IAAK,mBACH,OAAOnC,EAAMe,MAAM,CAACW,aAAcb,EAAOsB,UAE3C,IAAK,oBACH,OAAOnC,EAAMe,MAAM,CAACkB,cAAejC,EAAMiC,cAAcK,OAAOzB,EAAO0B,QACvE,IAAK,2BACH,OAAOvC,EAAMe,MAAM,CAACmB,qBAAsBlC,EAAMkC,qBAAqBI,OAAOzB,EAAO0B,QAErF,QACE,OAAOvC,ICrCPM,EAAeC,IAAU,CAC7BiC,YAAY,IAiBC/B,EAbC,WAAgC,IAA/BT,EAA+BU,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzBJ,EACrB,QAD8CI,UAAAC,OAAA,EAAAD,UAAA,QAAAE,GAC/BE,MACb,IAAK,cACH,OAAOd,EAAMe,MAAM,CAACyB,YAAY,IAElC,IAAK,cACH,OAAOxC,EAAMe,MAAM,CAACyB,YAAY,IAElC,QACE,OAAOxC,4BChBAyC,EAAU,qDAEVC,EAAeD,EAAU,eACzBE,EAAoBF,EAAU,oBAC9BG,EAAeH,EAAU,eAEzBI,EAAcJ,EAAU,kBACxBK,EAAmBL,EAAU,uBAC7BM,EAAaN,EAAU,4BCDnBO,cAWAC,cAWAC,cAWAC,GArCjB,SAASC,EAAQC,GACf,OAAOC,MAAMD,GAAK3D,KAAK,SAAA6D,GAAG,OAAIA,EAAIC,SAG7B,SAAUR,IAAV,IAAAvB,EAAA,OAAAgC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACL,OADKF,EAAAE,KAAA,EACCC,YAAI,CAACjD,KAAM,gBADZ,OAGa,OAHb8C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGmBE,YAAKZ,EAASV,GAHjC,OAIH,OADMjB,EAHHmC,EAAAK,KAAAL,EAAAE,KAAA,EAIGC,YAAI,CAACjD,KAAM,cAAeqB,QAASV,IAJtC,OAKH,OALGmC,EAAAE,KAAA,GAKGC,YAAI,CAACjD,KAAM,kBALd,QAAA8C,EAAAE,KAAA,iBAOH,OAPGF,EAAAC,KAAA,GAAAD,EAAAM,GAAAN,EAAA,SAAAA,EAAAE,KAAA,GAOGC,YAAI,CAACjD,KAAM,cAAeT,MAAKuD,EAAAM,KAPlC,yBAAAN,EAAAO,SAAAC,EAAAC,KAAA,UAWA,SAAUpB,IAAV,IAAAtB,EAAA,OAAA8B,EAAAC,EAAAC,KAAA,SAAAW,GAAA,cAAAA,EAAAT,KAAAS,EAAAR,MAAA,OACL,OADKQ,EAAAR,KAAA,EACCC,YAAI,CAACjD,KAAM,gBADZ,OAGa,OAHbwD,EAAAT,KAAA,EAAAS,EAAAR,KAAA,EAGmBE,YAAKZ,EAASR,GAHjC,OAIH,OADMjB,EAHH2C,EAAAL,KAAAK,EAAAR,KAAA,EAIGC,YAAI,CAACjD,KAAM,cAAeqB,QAASR,IAJtC,OAKH,OALG2C,EAAAR,KAAA,GAKGC,YAAI,CAACjD,KAAM,kBALd,QAAAwD,EAAAR,KAAA,iBAOH,OAPGQ,EAAAT,KAAA,GAAAS,EAAAJ,GAAAI,EAAA,SAAAA,EAAAR,KAAA,GAOGC,YAAI,CAACjD,KAAM,cAAeT,MAAKiE,EAAAJ,KAPlC,yBAAAI,EAAAH,SAAAI,EAAAF,KAAA,UAWA,SAAUnB,IAAV,IAAAxB,EAAA,OAAA+B,EAAAC,EAAAC,KAAA,SAAAa,GAAA,cAAAA,EAAAX,KAAAW,EAAAV,MAAA,OACL,OADKU,EAAAV,KAAA,EACCC,YAAI,CAACjD,KAAM,gBADZ,OAGkB,OAHlB0D,EAAAX,KAAA,EAAAW,EAAAV,KAAA,EAGwBE,YAAKZ,EAAST,GAHtC,OAIH,OADMjB,EAHH8C,EAAAP,KAAAO,EAAAV,KAAA,EAIGC,YAAI,CAACjD,KAAM,mBAAoBqB,QAAST,IAJ3C,OAKH,OALG8C,EAAAV,KAAA,GAKGC,YAAI,CAACjD,KAAM,kBALd,QAAA0D,EAAAV,KAAA,iBAOH,OAPGU,EAAAX,KAAA,GAAAW,EAAAN,GAAAM,EAAA,SAAAA,EAAAV,KAAA,GAOGC,YAAI,CAACjD,KAAM,cAAeT,MAAKmE,EAAAN,KAPlC,yBAAAM,EAAAL,SAAAM,EAAAJ,KAAA,UAWA,SAAUlB,EAAYtC,GAAtB,IAAA0B,EAAA,OAAAkB,EAAAC,EAAAC,KAAA,SAAAe,GAAA,cAAAA,EAAAb,KAAAa,EAAAZ,MAAA,OACL,OADKY,EAAAZ,KAAA,EACCC,YAAI,CAACjD,KAAM,gBADZ,OAGU,OAHV4D,EAAAb,KAAA,EAAAa,EAAAZ,KAAA,EAGgBa,YAAI,CACrB5C,YAAaiC,YAAKZ,EAASN,EAAiB8B,QAAQ,MAAO/D,EAAOgB,KAClEC,MAAOkC,YAAKZ,EAASL,EAAW6B,QAAQ,MAAO/D,EAAOgB,KACtDG,OAAQgC,YAAKZ,EAASP,EAAY+B,QAAQ,MAAO/D,EAAOgB,OANvD,OAQH,OALMU,EAHHmC,EAAAT,KAAAS,EAAAZ,KAAA,EAQGC,YAAI,CAACjD,KAAM,aAAcqB,QAASI,EAAMV,GAAIhB,EAAOgB,KARtD,OASH,OATG6C,EAAAZ,KAAA,GASGC,YAAI,CAACjD,KAAM,kBATd,QAAA4D,EAAAZ,KAAA,iBAWH,OAXGY,EAAAb,KAAA,GAAAa,EAAAR,GAAAQ,EAAA,SAAAA,EAAAZ,KAAA,GAWGC,YAAI,CAACjD,KAAM,cAAeT,MAAKqE,EAAAR,KAXlC,yBAAAQ,EAAAP,SAAAU,EAAAR,KAAA,yBCrCkBS,GAAV,SAAUA,IAAV,OAAArB,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACb,OADaF,EAAAE,KAAA,EACPiB,YAAU,gBAAiB/B,GADpB,OAEb,OAFaY,EAAAE,KAAA,EAEPiB,YAAU,gBAAiB9B,GAFpB,OAGb,OAHaW,EAAAE,KAAA,EAGPiB,YAAU,qBAAsB7B,GAHzB,OAIb,OAJaU,EAAAE,KAAA,EAIPiB,YAAU,eAAgB5B,GAJnB,wBAAAS,EAAAO,SAAAa,EAAAX,MCIf,ICAgBY,EDAVA,EAAUC,cACVC,EAAiBC,cACjBC,EAAkBpG,OAAOqG,sCAAwCC,IACjEC,EAAQC,aCHER,EDIIA,ECJQS,YAAgB,CAC1CC,OAAQC,wBAAcX,GACtB3B,QAAOf,OAAMsD,QDGbR,EACES,YACEC,2BAAiBd,GACjBE,KAINA,EAAea,IAAIlB,oJEHZ,SAASmB,GAAaC,GAC3B,MAAO,CAACpF,KAAMoF,EAAS,cAAgB,wCCF1BC,+LATX,OACEC,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,gBACbF,EAAA1C,EAAA2C,cAAA,OAAKE,IAAI,OAAOC,IAAKC,KAAMH,UAAU,uBACrCF,EAAA1C,EAAA2C,cAAA,QAAMC,UAAU,sBAAhB,iBALkBI,IAAMC,YCUjBC,+LARX,OACER,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,gBACVO,MAAO,CAACC,gBAAiB,OAASrE,EAAU,8BAAgC4B,KAAK0C,MAAMxE,KAAKyE,MAAQ,cAJpFN,IAAMC,YCC3BM,gNACJC,eAAiB,SAACC,GAChB,IAAIN,EAAQ,CACVO,WAAY,EACZC,QAAS,OACTC,MAAO,GACPC,OAAQ,IACRC,cAAe,UAEjB,OAAOC,EAAKV,MAAMpF,QAAQ+F,IAAI,SAACC,EAAMC,GAAP,OAC5BxB,EAAA1C,EAAA2C,cAAA,OAAKwB,IAAKD,EAAGf,MAAKzE,OAAAC,EAAA,EAAAD,CAAA,GAAMyE,EAAN,CAAaiB,aAAcF,EAAIH,EAAKV,MAAMpF,QAAQhB,OAAO,EAAI,GAAK,MAClFyF,EAAA1C,EAAA2C,cAAC0B,GAAD,CAAcxF,KAAMoF,iFAMxB,OACEvB,EAAA1C,EAAA2C,cAAC2B,GAAA,iBAAD,KACE5B,EAAA1C,EAAA2C,cAAA,OAAKQ,MAAO,CAACQ,QAAS,OAAQY,cAAe,OAAQC,OAAQ,SAC1D7D,KAAK6C,0BApBWR,IAAMC,WAiClBwB,yBANf,SAAyBnI,GACvB,MAAO,CACL2B,QAAS3B,EAAMuC,KAAKZ,UAITwG,CAAyBlB,gECrBzBmB,uLAVX,OACEhC,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,eACbF,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,qBAAqBC,IAAI,OACpCM,MAAO,CAACwB,OAAQhE,KAAK0C,MAAMuB,QAAU,cAAgB,QACrD9B,IAAK+B,KAAKC,SAAW,GAAKC,KAAQC,eANrBhC,IAAMC,WC2BhBgC,GA3Bf,SAAAC,GAAA,SAAAD,IAAA,IAAAE,EAAApB,EAAArF,OAAA0G,EAAA,EAAA1G,CAAAiC,KAAAsE,GAAA,QAAAI,EAAArI,UAAAC,OAAAqI,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAAxI,UAAAwI,GAAA,OAAAzB,EAAArF,OAAA+G,GAAA,EAAA/G,CAAAiC,MAAAwE,EAAAzG,OAAAgH,GAAA,EAAAhH,CAAAuG,IAAA3E,KAAAqF,MAAAR,EAAA,CAAAxE,MAAA/B,OAAA0G,MACEM,WAAa,WACX,OAAO7B,EAAKV,MAAMtF,QAAQiG,IAAI,SAAC9F,GAC7B,OACEwE,EAAA1C,EAAA2C,cAACkD,GAAA,OAAD,CAAQ1B,IAAKjG,EAAOC,GAAI2H,IAAK5H,EAAO4H,IAAKC,IAAK7H,EAAO8H,IAAKC,QAAS,kBAAO/H,EAAOgI,QAAUnC,EAAKV,MAAM8C,cAAcjI,EAAOC,MACzHuE,EAAA1C,EAAA2C,cAACkD,GAAA,aAAD,KACEnD,EAAA1C,EAAA2C,cAACyD,GAAD,CAAYxB,QAAS1G,EAAOgI,cANxCnC,EAAA,OAAArF,OAAA2H,GAAA,EAAA3H,CAAAuG,EAAAC,GAAAxG,OAAA4H,EAAA,EAAA5H,CAAAuG,EAAA,EAAAd,IAAA,SAAAoC,MAAA,WAcI,OACE7D,EAAA1C,EAAA2C,cAACkD,GAAA,IAAD,CAAKW,YAAa,CAACC,KAAM,QAASC,OVPV,wCUQnB9C,MAAOrI,OAAOoL,WACd9C,OAAQtI,OAAOqL,YAAY,EAC3BC,OAAQ,CAAC,UAAW,WACpBC,KAAM,IACRnG,KAAKiF,kBApBdX,EAAA,CAAgCjC,IAAMC,WCAzB8D,GAAb,SAAA7B,GAAA,SAAA6B,IAAA,IAAA5B,EAAApB,EAAArF,OAAA0G,EAAA,EAAA1G,CAAAiC,KAAAoG,GAAA,QAAA1B,EAAArI,UAAAC,OAAAqI,EAAA,IAAAC,MAAAF,GAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAAF,EAAAE,GAAAxI,UAAAwI,GAAA,OAAAzB,EAAArF,OAAA+G,GAAA,EAAA/G,CAAAiC,MAAAwE,EAAAzG,OAAAgH,GAAA,EAAAhH,CAAAqI,IAAAzG,KAAAqF,MAAAR,EAAA,CAAAxE,MAAA/B,OAAA0G,MACE0B,eAAiB,SAAC7I,GAAD,OACf4F,EAAKV,MAAM4D,SAASC,eAAK,cAAe,CAACC,SAAUhJ,MAFvD4F,EAAA,OAAArF,OAAA2H,GAAA,EAAA3H,CAAAqI,EAAA7B,GAAAxG,OAAA4H,EAAA,EAAA5H,CAAAqI,EAAA,EAAA5C,IAAA,SAAAoC,MAAA,WAKI,OACE7D,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,oBAAoBO,MAAO,CAACiE,SAAU,WAAYC,WAAY,KAC3E3E,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,QAAQO,MAAO,CAACiE,SAAU,WAAYE,KAAM,GAAIC,OAAQ,IAAM3D,MAAO,MAAnF,+FACAlB,EAAA1C,EAAA2C,cAAC6E,GAAD,CAAYzJ,QAAS4C,KAAK0C,MAAMtF,QAASoI,cAAexF,KAAKqG,sBARrED,EAAA,CAAqC/D,IAAMC,WAoB5BwB,yBANf,SAAyBnI,GACvB,MAAO,CACLyB,QAASzB,EAAMuC,KAAKd,UAIT0G,CAAyBsC,ICjBlCU,gNACJC,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMnG,GAAI4F,EAAKV,MAAMlF,GAAIwJ,YAAa5D,EAAKV,MAAMlF,IAC/CuE,EAAA1C,EAAA2C,cAAC2B,GAAA,MAAD,CAAOnG,GAAI4F,EAAKV,MAAMlF,IACpBuE,EAAA1C,EAAA2C,cAACiF,GAAD,MACAlF,EAAA1C,EAAA2C,cAACkF,GAAD,MACAnF,EAAA1C,EAAA2C,cAACmF,GAAD,uCANe9E,IAAMC,WAgBdwB,yBAJf,SAAyBnI,GACvB,MAAO,IAGMmI,CAAyBgD,aCXzBM,+LARX,OACErF,EAAA1C,EAAA2C,cAAA,OAAKC,UAAU,oBACZjC,KAAK0C,MAAMxE,KAAKmJ,aAJKhF,IAAMC,YCI9BgF,gNACJC,oBAAsB,kBACpBnE,EAAKV,MAAMrF,aAAagG,IAAI,SAACC,GAAD,OAC1BvB,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,CAAKhE,IAAKF,EAAK9F,GAAIiK,GAAI,GACrB1F,EAAA1C,EAAA2C,cAAC0F,GAAD,CAAiBxJ,KAAMoF,UAK7ByD,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMnG,GAAI4F,EAAKV,MAAMlF,GAAIwJ,YAAa5D,EAAKV,MAAMlF,IAC/CuE,EAAA1C,EAAA2C,cAAC2B,GAAA,MAAD,CAAOnG,GAAI4F,EAAKV,MAAMlF,IACpBuE,EAAA1C,EAAA2C,cAACiF,GAAD,MACAlF,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,SAAd,yFACAF,EAAA1C,EAAA2C,cAACwF,GAAA,KAAD,CAAMG,OAAK,EAACnF,MAAO,CAACoF,WAAY,8CAA+ClB,WAAY,KACzF3E,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,KACGpE,EAAKmE,yDAhBalF,IAAMC,WA8BtBwB,yBANf,SAAyBnI,GACvB,MAAO,CACL0B,aAAc1B,EAAMuC,KAAKb,eAIdyG,CAAyBwD,IC9BlCO,gNACJhF,eAAiB,WACf,OAAOO,EAAKV,MAAM9E,cAAcyF,IAAI,SAACC,EAAMC,GAAP,OAClCxB,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,CAAKhE,IAAKD,EAAGkE,GAAI,EAAGjF,MAAO,CAACU,OAAQ,IAAK4E,aAAc,KACrD/F,EAAA1C,EAAA2C,cAAC0B,GAAD,CAAcxF,KAAMoF,UAK1ByD,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMnG,GAAI4F,EAAKV,MAAMlF,GAAIwJ,YAAa5D,EAAKV,MAAMlF,IAC/CuE,EAAA1C,EAAA2C,cAAC2B,GAAA,MAAD,CAAOnG,GAAI4F,EAAKV,MAAMlF,IACpBuE,EAAA1C,EAAA2C,cAACiF,GAAD,MACAlF,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,SAAd,iHACAF,EAAA1C,EAAA2C,cAACwF,GAAA,KAAD,CAAMG,OAAK,GACT5F,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,KACGpE,EAAKP,oDAhBQR,IAAMC,WA8BjBwB,yBANf,SAAyBnI,GACvB,MAAO,CACLiC,cAAejC,EAAMuC,KAAKZ,UAIfwG,CAAyB+D,IChClCE,gNACJhB,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMnG,GAAI4F,EAAKV,MAAMlF,GAAIwJ,YAAa5D,EAAKV,MAAMlF,IAC/CuE,EAAA1C,EAAA2C,cAAC2B,GAAA,MAAD,CAAOnG,GAAI4F,EAAKV,MAAMlF,IACpBuE,EAAA1C,EAAA2C,cAACiF,GAAD,MACAlF,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,QAAQO,MAAO,CAACwF,UAAW,KAAzC,0DACAjG,EAAA1C,EAAA2C,cAAA,WACED,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,QAAQO,MAAO,CAACwF,UAAW,KAAzC,sEACAjG,EAAA1C,EAAA2C,cAAC2B,GAAA,OAAD,CAAQsE,gBAAc,EAACzF,MAAO,CAAC0F,WAAY,EAAGC,MAAO,QAASH,WAAY,GAAII,YAAa,OAE7FrG,EAAA1C,EAAA2C,cAAA,WACED,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,QAAQO,MAAO,CAACwF,UAAW,KAAzC,oDACAjG,EAAA1C,EAAA2C,cAAC2B,GAAA,OAAD,CAAQsE,gBAAc,EAACzF,MAAO,CAAC0F,WAAY,EAAGC,MAAO,QAASH,WAAY,GAAII,YAAa,OAE7FrG,EAAA1C,EAAA2C,cAAA,WACED,EAAA1C,EAAA2C,cAAA,MAAIC,UAAU,QAAQO,MAAO,CAACwF,UAAW,KAAzC,4BACAjG,EAAA1C,EAAA2C,cAAC2B,GAAA,OAAD,CAAQsE,gBAAc,EAACzF,MAAO,CAAC0F,WAAY,EAAGC,MAAO,QAASH,WAAY,GAAII,YAAa,wCAhB1E/F,IAAMC,WA2BlBwB,yBAJf,SAAyBnI,GACvB,MAAO,IAGMmI,CAAyBiE,iBCiCzBM,gNA7DbC,eAAiBC,SAASvG,cAAc,YACxCwG,YAAc,OACdC,aAAe,OACfC,SAAW,OAmDX3B,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAA,OAAKQ,MAAO,CAACiE,SAAU,QAASE,IAAK,IACnC5E,EAAA1C,EAAA2C,cAAA,SAAO2G,UAAQ,EAACC,IAAK,SAAAC,GAAI,OAAIzF,EAAKoF,YAAcK,iFAlD1C,IAAAC,EAAA9I,KACR,OAAO+I,KAAQ,WACb,IAAMC,EAAcD,KAAcD,EAAKN,aAQnCtJ,EAPiB4J,EAAKG,UAAUD,GAGFE,WAAW,GAIrBC,UAAUC,IAAIL,KAAU,MAAMM,IAAIN,KAAU,IACpED,EAAKpG,MAAM4G,UAAYR,EAAKpG,MAAM4G,SAASpK,uCAIrCqK,GACR,IAAMC,EAAOtF,KAAKuF,IAAIF,EAAIG,MAAM,GAAIH,EAAIG,MAAM,IAExCC,EADeJ,EAAIG,MAAM,GAAK,EACAF,EAAO,EAErCI,EADcL,EAAIG,MAAM,GAAK,EACDF,EAAO,EACzC,OAAOD,EAAIM,MAAM,CAACF,EAAaC,EAAY,GAAI,CAACJ,EAAMA,EAAM,gDAG1C,IAAAM,EAAA9J,KAClB9E,UAAU6O,aAAaC,aAAa,CAACC,MAAO,CAAEC,WAAa,gBAAkB,SAAAC,GAC3EL,EAAKrB,aAAe0B,EAAOC,YAAY,GAEvCN,EAAKtB,YAAY6B,UAAYF,EAC7BL,EAAKtB,YAAYvF,MAAQ,IACzB6G,EAAKtB,YAAYtF,OAAS,IAE1B4G,EAAKtB,YAAY8B,iBAAmB,WAClCR,EAAKtB,YAAYhG,MAAMS,MAAQ6G,EAAKtB,YAAY+B,WAAWT,EAAKtB,YAAYgC,YAAc,KAC1FV,EAAKtB,YAAYhG,MAAM0F,aAAe4B,EAAKtB,YAAY+B,WAAWT,EAAKtB,YAAYgC,aAAa,EAAE5P,OAAOoL,WAAW,EAAI,KACxH8D,EAAKtB,YAAYhG,MAAMU,OAAS,QAEhC4G,EAAKpB,SAAW+B,YAAY,kBAAMX,EAAKY,WAAW,OAEnD,SAAA1O,GACD,MAAMA,mDAIRgE,KAAK0I,UAAYiC,cAAc3K,KAAK0I,UACpC1I,KAAKyI,cAAgBzI,KAAKyI,aAAa3I,cApDtBuC,IAAMC,WCmBZsI,+LAhBX,IAAIpI,EAAQ,GAIZ,MAH2B,QAAxBxC,KAAK0C,MAAM+D,SAAoBjE,EAAMmE,IAAM,GACd,WAAxB3G,KAAK0C,MAAM+D,WAAuBjE,EAAMqI,OAAS,IAGvD9I,EAAA1C,EAAA2C,cAACwF,GAAA,KAAD,CAAMvF,UAAU,aAAa0F,OAAK,EAACnF,MAAOA,GACxCT,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,KACEzF,EAAA1C,EAAA2C,cAACwF,GAAA,IAAD,CAAKvF,UAAU,oBAAoBO,MAAOxC,KAAK0C,MAAMF,MAAOiF,GAAIzH,KAAK0C,MAAM8G,MACxExJ,KAAK0C,MAAMoI,mBAVAzI,IAAMC,YCIxByI,gNAWJzB,SAAW,SAACC,OAIZxC,OAAS,kBACPhF,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMnG,GAAI4F,EAAKV,MAAMlF,GAAIwJ,YAAa5D,EAAKV,MAAMlF,IAC/CuE,EAAA1C,EAAA2C,cAAC2B,GAAA,MAAD,CAAOnG,GAAI4F,EAAKV,MAAMlF,IACpBuE,EAAA1C,EAAA2C,cAACgJ,GAAD,CAAQ1B,SAAUlG,EAAKkG,WACvBvH,EAAA1C,EAAA2C,cAACiJ,GAAD,CAAWxE,SAAS,MAAM+C,KAAM,IAC9BzH,EAAA1C,EAAA2C,cAAA,QAAMQ,MAAO,CAAC0I,SAAU,GAAIC,WAAY,MAAxC,sNAEFpJ,EAAA1C,EAAA2C,cAACiJ,GAAD,CAAWxE,SAAS,SAAS+C,KAAM,GAAIhH,MAAO,CAAC4I,UAAW,OAAQC,QAAS,mBACzEtJ,EAAA1C,EAAA2C,cAAA,QAAMQ,MAAO,CAAC0I,SAAU,MAAOC,WAAY,MAAO/H,EAAKV,MAAMnF,OAAOX,8FArB1EoD,KAAK0C,MAAM4D,SAAS1E,IAAa,IACjC5B,KAAK0C,MAAM4D,SdEN,CAAC7J,KAAM,eAAgBe,GcFIwC,KAAK0C,MAAM8D,0DAI3CxG,KAAK0C,MAAM4D,SAAS1E,IAAa,WAPRS,IAAMC,WAuCpBwB,yBATf,SAAyBnI,GACvB,IAAI6B,EAAK7B,EAAM2F,OAAOzG,SAASc,MAAM6K,SACrC,MAAO,CACLA,SAAUhJ,EACVD,OC/BG,SAAmB5B,EAAO6B,GAC/B,IAAI,IAAI+F,EAAI,EAAGA,EAAI5H,EAAMuC,KAAKd,QAAQd,OAAQiH,IAC5C,GAAG5H,EAAMuC,KAAKd,QAAQmG,GAAG/F,KAAOA,EAAI,OAAO7B,EAAMuC,KAAKd,QAAQmG,GD6BtD+H,CAAU3P,EAAO6B,IAAO,GAChC+N,YAAa5P,EAAMuC,KAAKqN,cAIbzH,CAAyBiH,IE7BlCS,gNAaJC,cAAgB,SAACC,GAAD,OACdtI,EAAKV,MAAM4D,SAASC,eAAK,IAAMmF,EAAEC,cAAcC,QAAQC,6FAZvD7L,KAAK0C,MAAM4D,ShBnBN,CAAC7J,KAAM,kBgBoBZuD,KAAK0C,MAAM4D,ShBZN,CAAC7J,KAAM,uBgBaZuD,KAAK0C,MAAM4D,ShBjBN,CAAC7J,KAAM,oEgBoBYqP,GACrB9L,KAAK0C,MAAMvE,aAAe2N,EAAU3N,aACrCoK,SAASwD,cAAc,WAAWvJ,MAAMwJ,QAAUF,EAAU3N,WAAa,EAAI,oCAQ/E,IAAI8N,EAAcjM,KAAK0C,MAAMwJ,QAAU,OAEvC,OACEnK,EAAA1C,EAAA2C,cAAC2B,GAAA,KAAD,CAAMwI,YAAaF,EAAaG,OAC9BrK,EAAA1C,EAAA2C,cAAC2B,GAAA,OAAD,KACE5B,EAAA1C,EAAA2C,cAAC2B,GAAA,WAAD,CACG2B,QAAStF,KAAKyL,cACdY,SAA0B,SAAhBJ,EACVK,aAAW,QACbvK,EAAA1C,EAAA2C,cAACuK,GAAAlN,EAAD,OACD0C,EAAA1C,EAAA2C,cAAC2B,GAAA,WAAD,CACG2B,QAAStF,KAAKyL,cACdY,SAA0B,iBAAhBJ,EACVK,aAAW,eACXE,MAAOxM,KAAK0C,MAAMrF,cACpB0E,EAAA1C,EAAA2C,cAACyK,GAAApN,EAAD,OACD0C,EAAA1C,EAAA2C,cAAC2B,GAAA,WAAD,CACG2B,QAAStF,KAAKyL,cACdY,SAA0B,YAAhBJ,EACVK,aAAW,UACXE,MAAOxM,KAAK0C,MAAMpF,SACpByE,EAAA1C,EAAA2C,cAAC0K,GAAArN,EAAD,OACD0C,EAAA1C,EAAA2C,cAAC2B,GAAA,WAAD,CACG2B,QAAStF,KAAKyL,cACdY,SAA0B,aAAhBJ,EACVK,aAAW,YACbvK,EAAA1C,EAAA2C,cAAC2K,GAAAtN,EAAD,SAGH0C,EAAA1C,EAAA2C,cAAC4K,GAAD,CAAUpP,GAAG,SACbuE,EAAA1C,EAAA2C,cAAC6K,GAAD,CAAkBrP,GAAG,iBACrBuE,EAAA1C,EAAA2C,cAAC8K,GAAD,CAAatP,GAAG,YAChBuE,EAAA1C,EAAA2C,cAAC+K,GAAD,CAAcvP,GAAG,aACjBuE,EAAA1C,EAAA2C,cAACgL,GAAD,CAAgBxP,GAAG,uBAlDT6E,IAAMC,WAgETwB,yBARf,SAAyBnI,GACvB,MAAO,CACLwC,WAAYxC,EAAM6F,GAAGrD,WACrBd,aAAc1B,EAAMuC,KAAKb,aAAaf,OACtCgB,QAAU3B,EAAMuC,KAAKZ,QAAQhB,SAIlBwH,CAAyB0H,kBCrExCrK,EAAM8L,UAAU,WACd,IAAItR,EAAQwF,EAAMlE,WAAWiB,KAC7BvB,EAAU,gBAAiBhB,EAAMiC,eACjCjB,EAAU,uBAAwBhB,EAAMkC,wBAG1C,IAAMkJ,GAAS,WACbmG,IAASnG,OACPhF,EAAA1C,EAAA2C,cAACmL,EAAA,SAAD,CAAUhM,MAAOA,GACfY,EAAA1C,EAAA2C,cAACoL,EAAA,gBAAD,CAAiBxM,QAASA,GACxBmB,EAAA1C,EAAA2C,cAAA,WACED,EAAA1C,EAAA2C,cAACqL,EAAA,EAAD,CAAOC,KAAK,YAAYC,UAAW,SAAC7K,GAAD,OAAWX,EAAA1C,EAAA2C,cAACwL,GAAD,CAAKtB,OAAQxJ,EAAM3H,MAAM0S,OAAOvB,eAIpF3D,SAASmF,eAAe,W3BRb,WACX,GAA6C,kBAAmBxS,UAAW,CAGvE,GADkB,IAAIyS,IAAIC,SAAwBhT,OAAOC,UAC3CgT,SAAWjT,OAAOC,SAASgT,OAIrC,OAGJjT,OAAOkT,iBAAiB,OAAQ,WAC5B,IAAM7S,EAAK,GAAAgD,OAAM2P,SAAN,sBAEPlT,GAiDhB,SAAiCO,GAE7BgE,MAAMhE,GACDI,KAAK,SAAA0S,GAGsB,MAApBA,EAASC,SACuD,IAAhED,EAASE,QAAQC,IAAI,gBAAgBC,QAAQ,cAG7CjT,UAAUC,cAAciT,MAAM/S,KAAK,SAAAC,GAC/BA,EAAa+S,aAAahT,KAAK,WAC3BT,OAAOC,SAASyT,aAKxBtT,EAAgBC,KAGvBc,MAAM,WACHF,QAAQC,IACJ,mEArEAyS,CAAwBtT,GAIxBC,UAAUC,cAAciT,MAAM/S,KAAK,WAC/BQ,QAAQC,IACJ,+GAMRd,EAAgBC,M2BhBhCuT,GACAjG,SAASuF,iBAAiB,cAAe/G,IAAQ,IAChDnM,OAAO6T,SAAW1H","file":"static/js/main.0a6835de.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/icon.fe7dec40.png\";","module.exports = __webpack_public_path__ + \"static/media/classical-building-ios.5a41fe29.png\";","module.exports = __webpack_public_path__ + \"static/media/classical-building-android.49f7df50.png\";","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n    window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register() {\r\n    if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n        // The URL constructor is available in all browsers that support SW.\r\n        const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n        if (publicUrl.origin !== window.location.origin) {\r\n            // Our service worker won't work if PUBLIC_URL is on a different origin\r\n            // from what our page is served on. This might happen if a CDN is used to\r\n            // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n            return;\r\n        }\r\n\r\n        window.addEventListener('load', () => {\r\n            const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n            if (isLocalhost) {\r\n                // This is running on localhost. Lets check if a service worker still exists or not.\r\n                checkValidServiceWorker(swUrl);\r\n\r\n                // Add some additional logging to localhost, pointing developers to the\r\n                // service worker/PWA documentation.\r\n                navigator.serviceWorker.ready.then(() => {\r\n                    console.log(\r\n                        'This web app is being served cache-first by a service ' +\r\n                        'worker. To learn more, visit https://goo.gl/SC7cgQ'\r\n                    );\r\n                });\r\n            } else {\r\n                // Is not local host. Just register service worker\r\n                registerValidSW(swUrl);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n    navigator.serviceWorker\r\n        .register(swUrl)\r\n        .then(registration => {\r\n            registration.onupdatefound = () => {\r\n                const installingWorker = registration.installing;\r\n                installingWorker.onstatechange = () => {\r\n                    if (installingWorker.state === 'installed') {\r\n                        if (navigator.serviceWorker.controller) {\r\n                            // At this point, the old content will have been purged and\r\n                            // the fresh content will have been added to the cache.\r\n                            // It's the perfect time to display a \"New content is\r\n                            // available; please refresh.\" message in your web app.\r\n                            console.log('New content is available; please refresh.');\r\n                        } else {\r\n                            // At this point, everything has been precached.\r\n                            // It's the perfect time to display a\r\n                            // \"Content is cached for offline use.\" message.\r\n                            console.log('Content is cached for offline use.');\r\n                        }\r\n                    }\r\n                };\r\n            };\r\n        })\r\n        .catch(error => {\r\n            console.error('Error during service worker registration:', error);\r\n        });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n    // Check if the service worker can be found. If it can't reload the page.\r\n    fetch(swUrl)\r\n        .then(response => {\r\n            // Ensure service worker exists, and that we really are getting a JS file.\r\n            if (\r\n                response.status === 404 ||\r\n                response.headers.get('content-type').indexOf('javascript') === -1\r\n            ) {\r\n                // No service worker found. Probably a different app. Reload the page.\r\n                navigator.serviceWorker.ready.then(registration => {\r\n                    registration.unregister().then(() => {\r\n                        window.location.reload();\r\n                    });\r\n                });\r\n            } else {\r\n                // Service worker found. Proceed as normal.\r\n                registerValidSW(swUrl);\r\n            }\r\n        })\r\n        .catch(() => {\r\n            console.log(\r\n                'No internet connection found. App is running in offline mode.'\r\n            );\r\n        });\r\n}\r\n\r\nexport function unregister() {\r\n    if ('serviceWorker' in navigator) {\r\n        navigator.serviceWorker.ready.then(registration => {\r\n            registration.unregister();\r\n        });\r\n    }\r\n}\r\n","import Immutable from 'seamless-immutable';\r\n\r\nconst initialState = Immutable({\r\n  loading: false,\r\n  error: null\r\n});\r\n\r\n\r\nconst reducer = (state=initialState, action) => {\r\n  switch (action.type) {\r\n    case 'FETCH_START':\r\n      return state.merge({loading: true});\r\n\r\n    case 'FETCH_SUCCEED':\r\n      return state.merge({loading: false});\r\n\r\n    case 'FETCH_ERROR':\r\n      return state.merge({loading: false, error: action.error});\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","export function saveState(name, state) {\r\n  localStorage.setItem(name, JSON.stringify(state));\r\n}\r\n\r\nexport function getState(name) {\r\n  return JSON.parse(localStorage.getItem(name) || 'null');\r\n}\r\n","import Immutable from 'seamless-immutable';\r\nimport {getState} from '../storage';\r\n\r\nconst initialState = Immutable({\r\n  museums: [],\r\n  achievements: [],\r\n  stories: [],\r\n  museum: {\r\n    id: null,\r\n    items: [],\r\n    playgrounds: [],\r\n    logreg: []\r\n  },\r\n\r\n  completeItems: getState('completeItems') || [],\r\n  completeAchievements: getState('completeAchievements') || []\r\n});\r\n\r\n\r\nconst reducer = (state=initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_MUSEUMS':\r\n      return state.merge({museums: action.payload});\r\n\r\n    case 'SET_MUSEUM':\r\n      return state.merge({museum: {...action.payload, id: action.id}});\r\n\r\n    case 'SET_STORIES':\r\n      return state.merge({stories: action.payload});\r\n\r\n    case 'SET_ACHIEVEMENTS':\r\n      return state.merge({achievements: action.payload});\r\n\r\n    case 'SET_COMPLETE_ITEM':\r\n      return state.merge({completeItems: state.completeItems.concat(action.data)});\r\n    case 'SET_COMPLETE_ACHIEVEMENT':\r\n      return state.merge({completeAchievements: state.completeAchievements.concat(action.data)});\r\n\r\n    default:\r\n      return state\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","import Immutable from 'seamless-immutable';\r\n\r\nconst initialState = Immutable({\r\n  tabbarShow: true\r\n});\r\n\r\n\r\nconst reducer = (state=initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SHOW_TABBAR':\r\n      return state.merge({tabbarShow: true});\r\n\r\n    case 'HIDE_TABBAR':\r\n      return state.merge({tabbarShow: false});\r\n\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default reducer;\r\n","export const DB_PATH = 'https://raw.githubusercontent.com/AZbang/vingo/db/';\r\n\r\nexport const MUSEUMS_PATH = DB_PATH + 'museums.json';\r\nexport const ACHIEVEMENTS_PATH = DB_PATH + 'achievements.json';\r\nexport const STORIES_PATH = DB_PATH + 'stories.json';\r\n\r\nexport const LOGREG_PATH = DB_PATH + ':id/logreg.json';\r\nexport const PLAYGROUNDS_PATH = DB_PATH + ':id/playgrounds.json';\r\nexport const ITEMS_PATH = DB_PATH + ':id/items.json';\r\n\r\nexport const ITEMS_IMAGES = DB_PATH + ':id/items/';\r\nexport const PLAYGROUNDS_IMAGES = DB_PATH + ':id/playgrounds/';\r\n\r\nexport const YANDEX_MAP_API = '80ea98cf-f2cc-47d6-9fe3-47fc8f9bf7c0';\r\n","import {call, all, put} from 'redux-saga/effects'\r\nimport {MUSEUMS_PATH, STORIES_PATH, ACHIEVEMENTS_PATH, PLAYGROUNDS_PATH, ITEMS_PATH, LOGREG_PATH} from '../env';\r\n\r\nfunction getData(url) {\r\n  return fetch(url).then(res => res.json());\r\n}\r\n\r\nexport function* fetchMuseums() {\r\n  yield put({type: 'FETCH_START'});\r\n  try {\r\n    const museums = yield call(getData, MUSEUMS_PATH);\r\n    yield put({type: 'SET_MUSEUMS', payload: museums});\r\n    yield put({type: 'FETCH_SUCCEED'});\r\n  } catch(e) {\r\n    yield put({type: 'FETCH_ERROR', error: e});\r\n  }\r\n}\r\n\r\nexport function* fetchStories() {\r\n  yield put({type: 'FETCH_START'});\r\n  try {\r\n    const stories = yield call(getData, STORIES_PATH);\r\n    yield put({type: 'SET_STORIES', payload: stories});\r\n    yield put({type: 'FETCH_SUCCEED'});\r\n  } catch(e) {\r\n    yield put({type: 'FETCH_ERROR', error: e});\r\n  }\r\n}\r\n\r\nexport function* fetchAchievements() {\r\n  yield put({type: 'FETCH_START'});\r\n  try {\r\n    const achievements = yield call(getData, ACHIEVEMENTS_PATH);\r\n    yield put({type: 'SET_ACHIEVEMENTS', payload: achievements});\r\n    yield put({type: 'FETCH_SUCCEED'});\r\n  } catch(e) {\r\n    yield put({type: 'FETCH_ERROR', error: e});\r\n  }\r\n}\r\n\r\nexport function* fetchMuseum(action) {\r\n  yield put({type: 'FETCH_START'});\r\n  try {\r\n    const data = yield all({\r\n      playgrounds: call(getData, PLAYGROUNDS_PATH.replace(':id', action.id)),\r\n      items: call(getData, ITEMS_PATH.replace(':id', action.id)),\r\n      logreg: call(getData, LOGREG_PATH.replace(':id', action.id))\r\n    });\r\n    yield put({type: 'SET_MUSEUM', payload: data, id: action.id});\r\n    yield put({type: 'FETCH_SUCCEED'});\r\n  } catch(e) {\r\n    yield put({type: 'FETCH_ERROR', error: e});\r\n  }\r\n}\r\n","import { takeEvery } from 'redux-saga/effects'\r\nimport { fetchMuseums, fetchMuseum, fetchAchievements, fetchStories } from './data'\r\n\r\nexport default function* rootSaga() {\r\n  yield takeEvery('FETCH_MUSEUMS', fetchMuseums);\r\n  yield takeEvery('FETCH_STORIES', fetchStories);\r\n  yield takeEvery('FETCH_ACHIEVEMENTS', fetchAchievements);\r\n  yield takeEvery('FETCH_MUSEUM', fetchMuseum);\r\n}\r\n","import { applyMiddleware, compose, createStore } from 'redux'\r\nimport { routerMiddleware } from 'connected-react-router'\r\nimport { createBrowserHistory } from 'history'\r\nimport createSagaMiddleware from 'redux-saga'\r\nimport createRootReducer from './reducers'\r\nimport rootSaga from './sagas'\r\n\r\nconst history = createBrowserHistory();\r\nconst sagaMiddleware = createSagaMiddleware();\r\nconst composeEnhancer = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store = createStore(\r\n  createRootReducer(history),\r\n  composeEnhancer(\r\n    applyMiddleware(\r\n      routerMiddleware(history),\r\n      sagaMiddleware\r\n    ),\r\n  ),\r\n);\r\nsagaMiddleware.run(rootSaga);\r\n\r\nexport {store, history};\r\n","import { combineReducers } from 'redux'\r\nimport { connectRouter } from 'connected-react-router'\r\n\r\nimport fetch from './fetch'\r\nimport data from './data'\r\nimport ui from './ui'\r\n\r\nexport default (history) => combineReducers({\r\n  router: connectRouter(history),\r\n  fetch, data, ui\r\n});\r\n","export function fetchMuseums() {\r\n  return {type: 'FETCH_MUSEUMS'}\r\n}\r\n\r\nexport function fetchStories() {\r\n  return {type: 'FETCH_STORIES'}\r\n}\r\n\r\nexport function fetchAchievements() {\r\n  return {type: 'FETCH_ACHIEVEMENTS'}\r\n}\r\n\r\nexport function fetchMuseum(id) {\r\n  return {type: 'FETCH_MUSEUM', id}\r\n}\r\n\r\nexport function toogleTabbar(toggle) {\r\n  return {type: toggle ? 'SHOW_TABBAR' : 'HIDE_TABBAR'}\r\n}\r\n\r\nexport function predictItem(img) {\r\n  return {type: 'PREDICT_ITEM', image: img};\r\n}\r\n","import React from 'react';\r\nimport logo from '../assets/icon.png'\r\nimport './VingoHeader.css';\r\n\r\nclass VingoHeader extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"vingo-header\">\r\n        <img alt=\"logo\" src={logo} className=\"vingo-header__icon\"/>\r\n        <span className=\"vingo-header__name\">VINGO</span>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default VingoHeader;\r\n","import React from 'react';\r\nimport {DB_PATH} from '../env';\r\nimport './StoryPreview.css';\r\n\r\nclass StoryPreview extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className=\"story-preview\"\r\n           style={{backgroundImage: 'url(' + DB_PATH + 'hermetage_general_building/' + this.props.data.image + ')'}}\r\n      ></div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default StoryPreview;\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {HorizontalScroll} from '@vkontakte/vkui';\r\nimport StoryPreview from '../components/StoryPreview';\r\n\r\nclass StoriesBlock extends React.Component {\r\n  getStoriesList = (amt) => {\r\n    let style = {\r\n      flexShrink: 0,\r\n      display: 'flex',\r\n      width: 80,\r\n      height: 120,\r\n      flexDirection: 'column'\r\n    }\r\n    return this.props.stories.map((item, i) => (\r\n      <div key={i} style={{...style, paddingRight: i < this.props.stories.length-1 ? 10 : 20}}>\r\n        <StoryPreview data={item}/>\r\n      </div>\r\n    ));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <HorizontalScroll>\r\n        <div style={{display: 'flex', paddingBottom: '10px', margin: '20px'}}>\r\n          {this.getStoriesList()}\r\n        </div>\r\n      </HorizontalScroll>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    stories: state.data.stories\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(StoriesBlock);\r\n","import React from 'react';\r\nimport './MuseumIcon.css';\r\nimport icon1 from '../assets/classical-building-ios.png';\r\nimport icon2 from '../assets/classical-building-android.png';\r\n\r\nclass MuseumIcon extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className='museum-icon'>\r\n        <img className='museum-icon__image' alt='icon'\r\n            style={{filter: this.props.disable ? 'grayscale()' : 'none'}}\r\n            src={Math.random() < .5 ? icon1 : icon2}/>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default MuseumIcon;\r\n","import React from 'react';\r\nimport { Map, Marker, MarkerLayout } from 'yandex-map-react';\r\nimport { YANDEX_MAP_API } from '../env';\r\nimport MuseumIcon from './MuseumIcon';\r\n\r\nexport class MuseumsMap extends React.Component {\r\n  getMarkers = () => {\r\n    return this.props.museums.map((museum) => {\r\n      return (\r\n        <Marker key={museum.id} lat={museum.lat} lon={museum.lng} onClick={() => !museum.locked && this.props.onMuseumClick(museum.id)}>\r\n          <MarkerLayout>\r\n            <MuseumIcon disable={museum.locked}/>\r\n          </MarkerLayout>\r\n        </Marker>\r\n      )\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Map loadOptions={{lang: 'en_RU', apikey: YANDEX_MAP_API}}\r\n           width={window.innerWidth}\r\n           height={window.innerHeight/2}\r\n           center={[59.943569, 30.277656]}\r\n           zoom={12}>\r\n        {this.getMarkers()}\r\n      </Map>\r\n    )\r\n  }\r\n}\r\n\r\n\r\nexport default MuseumsMap;\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {push} from 'connected-react-router';\r\nimport MuseumsMap from '../components/MuseumsMap';\r\n\r\nexport class MuseumsMapBlock extends React.Component {\r\n  openPlayground = (id) =>\r\n    this.props.dispatch(push('/playground', {museumId: id}));\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"museums-map-block\" style={{position: 'relative', paddingTop: 30}}>\r\n        <h1 className=\"label\" style={{position: 'absolute', top: -15, zIndex: 1000, width: 240}}>Музеи поблизости</h1>\r\n        <MuseumsMap museums={this.props.museums} onMuseumClick={this.openPlayground}></MuseumsMap>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    museums: state.data.museums\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(MuseumsMapBlock);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {View, Panel} from '@vkontakte/vkui';\r\n\r\nimport VingoHeader from '../components/VingoHeader';\r\nimport StoriesBlock from './StoriesBlock';\r\nimport MuseumsMapBlock from './MuseumsMapBlock';\r\n\r\nclass MainView extends React.Component {\r\n  render = () => (\r\n    <View id={this.props.id} activePanel={this.props.id}>\r\n      <Panel id={this.props.id}>\r\n        <VingoHeader/>\r\n        <StoriesBlock/>\r\n        <MuseumsMapBlock/>\r\n      </Panel>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {}\r\n}\r\n\r\nexport default connect(mapStateToProps)(MainView);\r\n","import React from 'react';\r\nimport './AchievementItem.css';\r\n\r\nclass AchievementItem extends React.Component {\r\n  render() {\r\n    return (\r\n      <div className='achievement-item'>\r\n        {this.props.data.icon}\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default AchievementItem;\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {View, Panel} from '@vkontakte/vkui';\r\nimport { Grid, Row, Col } from 'react-flexbox-grid';\r\nimport VingoHeader from '../components/VingoHeader';\r\nimport AchievementItem from '../components/AchievementItem';\r\n\r\nclass AchievementsView extends React.Component {\r\n  getAchievementsList = () => (\r\n    this.props.achievements.map((item) => (\r\n      <Col key={item.id} xs={3}>\r\n        <AchievementItem data={item}/>\r\n      </Col>\r\n    ))\r\n  )\r\n\r\n  render = () => (\r\n    <View id={this.props.id} activePanel={this.props.id}>\r\n      <Panel id={this.props.id}>\r\n        <VingoHeader></VingoHeader>\r\n        <h1 className=\"label\">Ваши достижения</h1>\r\n        <Grid fluid style={{background: 'linear-gradient(to right, #457fca, #5691c8)', paddingTop: 20}}>\r\n          <Row>\r\n            {this.getAchievementsList()}\r\n          </Row>\r\n        </Grid>\r\n      </Panel>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    achievements: state.data.achievements\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(AchievementsView);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {View, Panel} from '@vkontakte/vkui';\r\nimport { Grid, Row, Col } from 'react-flexbox-grid';\r\nimport VingoHeader from '../components/VingoHeader';\r\nimport StoryPreview from '../components/StoryPreview';\r\n\r\nclass StoriesView extends React.Component {\r\n  getStoriesList = () => {\r\n    return this.props.completeItems.map((item, i) => (\r\n      <Col key={i} xs={4} style={{height: 160, marginBottom: 20}}>\r\n        <StoryPreview data={item}/>\r\n      </Col>\r\n    ));\r\n  }\r\n\r\n  render = () => (\r\n    <View id={this.props.id} activePanel={this.props.id}>\r\n      <Panel id={this.props.id}>\r\n        <VingoHeader></VingoHeader>\r\n        <h1 className=\"label\">Сохраненные истории</h1>\r\n        <Grid fluid>\r\n          <Row>\r\n            {this.getStoriesList()}\r\n          </Row>\r\n        </Grid>\r\n      </Panel>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    completeItems: state.data.stories\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(StoriesView);\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {View, Panel, Switch} from '@vkontakte/vkui';\r\nimport VingoHeader from '../components/VingoHeader';\r\n\r\nclass SettingsView extends React.Component {\r\n  render = () => (\r\n    <View id={this.props.id} activePanel={this.props.id}>\r\n      <Panel id={this.props.id}>\r\n        <VingoHeader></VingoHeader>\r\n        <h1 className=\"label\" style={{marginTop: 20}}>Настройки</h1>\r\n        <div>\r\n          <h1 className=\"label\" style={{marginTop: 40}}>УВЕДОМЛЕНИЯ</h1>\r\n          <Switch defaultChecked style={{marginLeft: 0, float: 'right', marginTop: -50, marginRight: 10}}/>\r\n        </div>\r\n        <div>\r\n          <h1 className=\"label\" style={{marginTop: 10}}>ВИБРАЦИЯ</h1>\r\n          <Switch defaultChecked style={{marginLeft: 0, float: 'right', marginTop: -50, marginRight: 10}}/>\r\n        </div>\r\n        <div>\r\n          <h1 className=\"label\" style={{marginTop: 10}}>ЗВУК</h1>\r\n          <Switch defaultChecked style={{marginLeft: 0, float: 'right', marginTop: -50, marginRight: 10}}/>\r\n        </div>\r\n      </Panel>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {}\r\n}\r\n\r\nexport default connect(mapStateToProps)(SettingsView);\r\n","import React from 'react';\r\nimport * as tf from '@tensorflow/tfjs';\r\n\r\nclass Camera extends React.Component {\r\n  snapShotCanvas = document.createElement('canvas');\r\n  videoStream = null;\r\n  cameraStream = null;\r\n  tickerId = null;\r\n\r\n\r\n  capture() {\r\n    return tf.tidy(() => {\r\n      const webcamImage = tf.fromPixels(this.videoStream);\r\n      const croppedImage = this.cropImage(webcamImage);\r\n\r\n      // Expand the outer most dimension so we have a batch size of 1.\r\n      const batchedImage = croppedImage.expandDims(0);\r\n\r\n      // Normalize the image between -1 and 1. The image comes in between 0-255,\r\n      // so we divide by 127 and subtract 1.\r\n      let res =  batchedImage.toFloat().div(tf.scalar(127)).sub(tf.scalar(1));\r\n      this.props.onStream && this.props.onStream(res);\r\n    });\r\n  }\r\n\r\n  cropImage(img) {\r\n    const size = Math.min(img.shape[0], img.shape[1]);\r\n    const centerHeight = img.shape[0] / 2;\r\n    const beginHeight = centerHeight - (size / 2);\r\n    const centerWidth = img.shape[1] / 2;\r\n    const beginWidth = centerWidth - (size / 2);\r\n    return img.slice([beginHeight, beginWidth, 0], [size, size, 3]);\r\n  }\r\n\r\n  componentDidMount() {\r\n    navigator.mediaDevices.getUserMedia({video: { facingMode:  \"environment\" }}, stream => {\r\n      this.cameraStream = stream.getTracks()[0];\r\n\r\n      this.videoStream.srcObject = stream;\r\n      this.videoStream.width = 224;\r\n      this.videoStream.height = 224;\r\n\r\n      this.videoStream.onloadedmetadata = () => {\r\n        this.videoStream.style.width = this.videoStream.videoWidth+this.videoStream.videoHeight + 'px';\r\n        this.videoStream.style.marginLeft = -(this.videoStream.videoWidth+this.videoStream.videoHeight)/2+window.innerWidth/2 + 'px';\r\n        this.videoStream.style.height = '100vh';\r\n\r\n        this.tickerId = setInterval(() => this.capture(), 500);\r\n      }\r\n    }, error => {\r\n      throw error;\r\n    });\r\n  }\r\n  componentWillUnmount() {\r\n    this.tickerId && clearInterval(this.tickerId);\r\n    this.cameraStream && this.cameraStream.stop();\r\n  }\r\n\r\n  render = () => (\r\n    <div style={{position: 'fixed', top: 0}}>\r\n      <video autoPlay ref={node => this.videoStream = node}></video>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Camera;\r\n","import React from 'react';\r\nimport { Grid, Row, Col } from 'react-flexbox-grid';\r\nimport './ChipPanel.css';\r\n\r\nclass ChipPanel extends React.Component {\r\n  render() {\r\n    let style = {};\r\n    if(this.props.position === 'top') style.top = 10;\r\n    else if(this.props.position === 'bottom') style.bottom = 10;\r\n\r\n    return (\r\n      <Grid className=\"chip-panel\" fluid style={style}>\r\n        <Row>\r\n          <Col className=\"chip-panel__block\" style={this.props.style} xs={this.props.size}>\r\n            {this.props.children}\r\n          </Col>\r\n        </Row>\r\n      </Grid>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChipPanel;\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {View, Panel} from '@vkontakte/vkui';\r\nimport {fetchMuseum, toogleTabbar} from '../actions';\r\nimport {getMuseum} from '../getters';\r\nimport Camera from '../components/Camera';\r\nimport ChipPanel from '../components/ChipPanel';\r\n\r\nclass PlaygroundView extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(toogleTabbar(false));\r\n    this.props.dispatch(fetchMuseum(this.props.museumId));\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.dispatch(toogleTabbar(true));\r\n  }\r\n\r\n  // WIP\r\n  onStream = (img) => {\r\n    // this.props.dispatch(predictItem(img));\r\n  }\r\n\r\n  render = () => (\r\n    <View id={this.props.id} activePanel={this.props.id}>\r\n      <Panel id={this.props.id}>\r\n        <Camera onStream={this.onStream}/>\r\n        <ChipPanel position=\"top\" size={12}>\r\n          <span style={{fontSize: 13, fontWeight: 600}}>Отсканируйте картину, чтобы начать игру</span>\r\n        </ChipPanel>\r\n        <ChipPanel position=\"bottom\" size={12} style={{textAlign: 'left', padding: '24px 15px 15px'}}>\r\n          <span style={{fontSize: '2em', fontWeight: 800}}>{this.props.museum.name}</span>\r\n        </ChipPanel>\r\n      </Panel>\r\n    </View>\r\n  )\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  let id = state.router.location.state.museumId;\r\n  return {\r\n    museumId: id,\r\n    museum: getMuseum(state, id) || {},\r\n    predictItem: state.data.predictItem\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(PlaygroundView);\r\n","import {PLAYGROUNDS_IMAGES, ITEMS_IMAGES} from '../env';\r\n\r\nexport function getItemImage(id, name) {\r\n  return ITEMS_IMAGES.replace(':id', id) + name;\r\n}\r\n\r\nexport function getPlaygroundImage(id, name) {\r\n  return PLAYGROUNDS_IMAGES.replace(':id', id) + name;\r\n}\r\n\r\n\r\nexport function getMuseum(state, id) {\r\n  for(let i = 0; i < state.data.museums.length; i++) {\r\n    if(state.data.museums[i].id === id) return state.data.museums[i];\r\n  }\r\n}\r\n","import React from 'react';\r\nimport {connect} from 'react-redux';\r\nimport {push} from 'connected-react-router'\r\n\r\nimport {Epic, Tabbar, TabbarItem} from '@vkontakte/vkui';\r\nimport Icon28Newsfeed from '@vkontakte/icons/dist/28/newsfeed';\r\nimport Icon24FavoriteOutline from '@vkontakte/icons/dist/24/favorite_outline';\r\nimport Icon28Story from '@vkontakte/icons/dist/28/story';\r\nimport Icon28Settings from '@vkontakte/icons/dist/28/settings';\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\n\r\nimport {fetchMuseums, fetchAchievements, fetchStories} from '../actions'\r\nimport MainView from './MainView';\r\nimport AchievementsView from './AchievementsView';\r\nimport StoriesView from './StoriesView';\r\nimport SettingsView from './SettingsView';\r\nimport PlaygroundView from './PlaygroundView';\r\n\r\nclass App extends React.Component {\r\n  componentDidMount() {\r\n    this.props.dispatch(fetchMuseums());\r\n    this.props.dispatch(fetchAchievements());\r\n    this.props.dispatch(fetchStories());\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    if(this.props.tabbarShow !== nextProps.tabbarShow) {\r\n      document.querySelector('.Tabbar').style.opacity = nextProps.tabbarShow ? 1 : 0;\r\n    }\r\n  }\r\n\r\n  onStoryChange = (e) =>\r\n    this.props.dispatch(push('/' + e.currentTarget.dataset.story));\r\n\r\n  render() {\r\n    let activeRoute = this.props.pageId || 'main';\r\n\r\n    return (\r\n      <Epic activeStory={activeRoute} tabbar={\r\n        <Tabbar>\r\n          <TabbarItem\r\n             onClick={this.onStoryChange}\r\n             selected={activeRoute === 'main'}\r\n             data-story=\"main\"\r\n          ><Icon28Newsfeed/></TabbarItem>\r\n          <TabbarItem\r\n             onClick={this.onStoryChange}\r\n             selected={activeRoute === 'achievements'}\r\n             data-story=\"achievements\"\r\n             label={this.props.achievements}\r\n          ><Icon24FavoriteOutline/></TabbarItem>\r\n          <TabbarItem\r\n             onClick={this.onStoryChange}\r\n             selected={activeRoute === 'stories'}\r\n             data-story=\"stories\"\r\n             label={this.props.stories}\r\n          ><Icon28Story/></TabbarItem>\r\n          <TabbarItem\r\n             onClick={this.onStoryChange}\r\n             selected={activeRoute === 'settings'}\r\n             data-story=\"settings\"\r\n          ><Icon28Settings/></TabbarItem>\r\n        </Tabbar>\r\n      }>\r\n        <MainView id=\"main\"/>\r\n        <AchievementsView id=\"achievements\"/>\r\n        <StoriesView id=\"stories\"/>\r\n        <SettingsView id=\"settings\"/>\r\n        <PlaygroundView id=\"playground\"/>\r\n      </Epic>\r\n    )\r\n  }\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n  return {\r\n    tabbarShow: state.ui.tabbarShow,\r\n    achievements: state.data.achievements.length,\r\n    stories:  state.data.stories.length\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { Route } from 'react-router';\r\nimport { ConnectedRouter } from 'connected-react-router'\r\n\r\nimport registerServiceWorker from './sw';\r\nimport {store, history} from './store';\r\nimport {saveState} from './storage';\r\nimport App from './containers/App';\r\nimport './assets/theme.css';\r\nimport './assets/fonts.css';\r\n\r\nstore.subscribe(() => {\r\n  let state = store.getState().data;\r\n  saveState('completeItems', state.completeItems);\r\n  saveState('completeAchievements', state.completeAchievements);\r\n});\r\n\r\nconst render = () => {\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <ConnectedRouter history={history}>\r\n        <div>\r\n          <Route path='/:pageId?' component={(props) => <App pageId={props.match.params.pageId}/>}/>\r\n        </div>\r\n      </ConnectedRouter>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n  )\r\n}\r\n\r\nregisterServiceWorker();\r\ndocument.addEventListener(\"deviceready\", render, false);\r\n!window.cordova && render();\r\n"],"sourceRoot":""}